<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width" />

    <title>Service worker demo</title>

    <script type="module" src="./app.js"></script>
    <style>
        #__vconsole .vc-panel {
            min-height: 50%!important;
        }
    </style>
</head>
<body>
    <img id="img_display" src="" width="740" />

    <br />
    <p>请输入图片地址：</p>
    <input style="width: 300px" id="img_input" />
    <button id="btn-confirm">预览</button>


    <script>

        // 页面初始化时就开始注册sw
        // 注册之后，即可正常拦截图片请求，这里通过延迟模拟业务接口请求图片资源再加载的过程，保证先注册再请求图片的顺序
        setTimeout(function() {
            document.getElementById('img_display').src = 'https://1500019461.vod2.myqcloud.com/6cae8a7dvodcq1500019461/1a625a12243791581317117962/f0.png!P10000.png';
        }, 500);

        document.getElementById('btn-confirm').addEventListener('click', function() {
            var value = document.getElementById('img_input').value;
            if (value) {
                document.getElementById('img_display').src = value;
            }
        });
    </script>

</body>
</html>